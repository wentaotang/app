<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>H+ 后台主题UI框架 - Bootstrap Table</title>
    <meta name="keywords" content="H+后台主题,后台bootstrap框架,会员中心主题,后台HTML,响应式后台">
    <meta name="description" content="H+是一个完全响应式，基于Bootstrap3最新版本开发的扁平化主题，她采用了主流的左右两栏式布局，使用了Html5+CSS3等现代技术">

    <link rel="shortcut icon" href="favicon.ico">
    <link href="${CONTEXT_PATH}/static/hplus/css/bootstrap.min.css" rel="stylesheet">
    <link href="${CONTEXT_PATH}/static/hplus/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="${CONTEXT_PATH}/static/hplus/css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
    <link href="${CONTEXT_PATH}/static/hplus/css/animate.css" rel="stylesheet">
    <link href="${CONTEXT_PATH}/static/hplus/css/style.css" rel="stylesheet">


</head>

<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">

    <!-- Panel Other -->
    <div class="ibox float-e-margins">

        <div class="ibox-content">

            <div class="row ">
                <div class="col-sm-12">
                    <form class="form-inline" id="userSearchForm">
                        <div class="form-group">
                            <input class="form-control" id="mobile" name="mobile" placeholder="手机号码" type="text">
                            <input placeholder="开始时间" id="startTime" name="startTime" class="form-control layer-date laydate-icon"
                                   type="text">
                        </div>
                    </form>
                </div>
            </div>

            <h4></h4>

            <div class="row">
                <div class="col-sm-12">
                    <div class="pull-left">
                        <button class="btn btn-white btn-sm" data-toggle="modal" href="${CONTEXT_PATH}/user/add"
                                id="addDialog">
                            <i class="fa fa-plus"></i>新增
                        </button>
                        <button class="btn btn-white btn-sm" data-toggle="" data-placement="left" title="新增">
                            <i class="fa fa-file-text-o"></i>修改
                        </button>
                        <button class="btn btn-white btn-sm" data-toggle="" data-placement="left" title="新增">
                            <i class="fa fa-trash-o"></i>删除
                        </button>
                        <button class="btn btn-white btn-sm" data-toggle="" data-placement="left" title="新增">
                            <i class="glyphicon glyphicon-repeat"></i>刷新
                        </button>
                    </div>

                    <div class="pull-right">
                        <button class="btn btn-primary btn-rounded btn-outline btn-sm" id="userSearchBtn">
                            <i class="fa fa-search"></i>查询
                        </button>
                        <button class="btn btn-primary btn-rounded btn-outline btn-sm">
                            <i class="fa fa-refresh"></i>重置
                        </button>
                    </div>
                </div>
            </div>

            <table id="usersTablePagination" data-toggle="table"
                   data-mobile-responsive="true"
                   data-height="400"
                   data-icon-size="outline">
                <thead>
                <tr>
                    <th data-field="state" data-checkbox="true"></th>
                    <th data-field="id">ID</th>
                    <th data-field="name">名称</th>
                    <th data-field="price">价格</th>
                </tr>
                </thead>
            </table>
        </div>
        <!-- End Example Events -->
    </div>
</div>
</div>
</div>
<!-- End Panel Other -->
</div>


<div id="addUserModal" class="modal fade" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title">
                    新增用户
                </h4>
            </div>
            <div class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="submit" class="btn btn-primary">保存</button>
            </div>
        </div>
    </div>
</div>

<!-- 全局js -->
<script src="${CONTEXT_PATH}/static/hplus/js/jquery.min.js"></script>
<script src="${CONTEXT_PATH}/static/hplus/js/bootstrap.min.js"></script>

<!-- 自定义js -->
<script src="${CONTEXT_PATH}/static/hplus/js/content.js"></script>


<!-- Bootstrap table -->
<script src="${CONTEXT_PATH}/static/hplus/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
<script src="${CONTEXT_PATH}/static/hplus/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
<script src="${CONTEXT_PATH}/static/hplus/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>

<script src="${CONTEXT_PATH}/static/hplus/js/plugins/layer/laydate/laydate.js"></script>

<script>
    laydate({
        elem: '#startTime', //目标元素。由于laydate.js封装了一个轻量级的选择器引擎，因此elem还允许你传入class、tag但必须按照这种方式 '#id .class'
        event: 'focus', //响应事件。如果没有传入event，则按照默认的click
        istime: true,   //是否显示时间
        format: 'YYYY-MM-DD hh:mm:ss'
    });


    $('#usersTablePagination').bootstrapTable({
        url: '${CONTEXT_PATH}/user/list', //服务器数据的加载地址
        idField:"id",  //指定主键列
        cache:false,  //设置为 false 禁用 AJAX 数据缓存
        striped:true, //设置为 true 会有隔行变色效果
        method:"post", //服务器数据的请求方式 'get' or 'post',默认get
        contentType:"application/x-www-form-urlencoded",  //发送到服务器的数据编码类型,默认就是application/json，可以不用配置
        dataType:"json",    //服务器返回的数据类型,默认json，如果是json也不用配置
        pagination:true,
        pageList:[30,50,100],
        escape:true,  //转义HTML字符串，替换 &, <, >, ", `, 和 ' 字符.
        searchOnEnterKey:true,   //设置为 true时，按回车触发搜索方法，否则自动触发搜索方法
        columns: [
            {
                field: 'id',
                title: 'ID'
            },
            {
                field: 'userName',
                title: '姓名'
            },
            {
                field: 'mobile',
                title: '手机号码'
            },
            {
                field: 'registerDate',
                title: '注册时间'
            }
        ]
    });


    $("#userSearchBtn").on("click",function(){
        var data=$("#userSearchForm").serializeObject();
        alert(data);
        $('#usersTablePagination').bootstrapTable('refresh',{query:data});
    });




    $("#addDialog").on('click', function (e) {
        e.preventDefault();
        $('#addUserModal').modal('show').find('.modal-body').load($(this).attr('href'));
    });

    $.fn.serializeObject = function() {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [ o[this.name] ];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    }
</script>

</body>

</html>
